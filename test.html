<!DOCTYPE html>
<html>
<head>
    <title>Test Pending Actions</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>Test Pending Actions</h1>
    <button onclick="sendAction()">Send Test Action</button>
    <button onclick="joinAsAdmin()">Join as Admin</button>
    <div id="logs"></div>

    <script>
        const socket = io('http://localhost:5001');
        const logs = document.getElementById('logs');

        function log(message) {
            console.log(message);
            logs.innerHTML += '<div>' + new Date().toISOString() + ': ' + message + '</div>';
        }

        socket.on('connect', () => {
            log('Connected to server');
        });

        socket.on('disconnect', () => {
            log('Disconnected from server');
        });

        socket.on('action-submitted', (data) => {
            log('Action submitted: ' + JSON.stringify(data));
        });

        socket.on('admin-joined', (data) => {
            log('Admin joined: ' + JSON.stringify(data));
        });

        socket.on('current-players', (players) => {
            log('Current players: ' + JSON.stringify(players));
        });

        socket.on('pending-actions', (actions) => {
            log('Pending actions received: ' + JSON.stringify(actions));
        });

        socket.on('action-request', (action) => {
            log('Action request received: ' + JSON.stringify(action));
        });

        function sendAction() {
            const testAction = {
                playerCode: 'TEST123',
                action: 'request-money',
                details: {
                    amount: 1000,
                    reason: 'Test request'
                }
            };
            log('Sending test action: ' + JSON.stringify(testAction));
            socket.emit('player-action', testAction);
        }

        function joinAsAdmin() {
            log('Joining as admin');
            socket.emit('admin-join');
        }
    </script>
</body>
</html>
